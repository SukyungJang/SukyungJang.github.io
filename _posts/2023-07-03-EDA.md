---
layout: single
title:  "Kaggle 타이타닉 데이터 EDA 연습"
categories: Kaggle
tags: [python, kaggle, titanic, 필사]
author_profile: false
toc: true
toc_sticky: true
toc_label: 목차
---

# 1. Exploratory Data Analysis(EDA)


```python
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
plt.style.use('fivethirtyeight')
import warnings
warnings.filterwarnings('ignore')
%matplotlib inline
```

**fivethirtyeight**: 이 스타일은 미국의 정치 및 경제 뉴스 웹사이트인 FiveThirtyEight의 그래픽 스타일을 따르는 스타일입니다. 이 스타일은 깔끔하고 현대적인 디자인으로 알려져 있습니다. <br/>
<br/>

**%matplotlib inline**: 주피터 노트북이나 주피터랩에서 실행되는 경우, 그래프를 노트북 안에 인라인(inline)으로 표시하도록 설정하는 매직 커맨드입니다.


```python
data = pd.read_csv(r'C:\Users\82104\OneDrive\바탕 화면\kaggle\Transcription\titanic\data\train.csv')
```


```python
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>Braund, Mr. Owen Harris</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>A/5 21171</td>
      <td>7.2500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>PC 17599</td>
      <td>71.2833</td>
      <td>C85</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>1</td>
      <td>3</td>
      <td>Heikkinen, Miss. Laina</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>STON/O2. 3101282</td>
      <td>7.9250</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
      <td>female</td>
      <td>35.0</td>
      <td>1</td>
      <td>0</td>
      <td>113803</td>
      <td>53.1000</td>
      <td>C123</td>
      <td>S</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0</td>
      <td>3</td>
      <td>Allen, Mr. William Henry</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>373450</td>
      <td>8.0500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>




```python
data.isnull().sum() # checking for total null values
```




    PassengerId      0
    Survived         0
    Pclass           0
    Name             0
    Sex              0
    Age            177
    SibSp            0
    Parch            0
    Ticket           0
    Fare             0
    Cabin          687
    Embarked         2
    dtype: int64



나이, 선실 및 탑승지에는 널(null)값이 있습니다. 이를 수정해보겠습니다.

**How many Survived??**


```python
f, ax = plt.subplots(1, 2, figsize = (18, 8))
data['Survived'].value_counts().plot.pie(explode = [0, 0.1],
                                         autopct = '%1.1f%%', ax = ax[0], shadow = True)
ax[0].set_title('Survived')
ax[0].set_ylabel('')
sns.countplot(x = 'Survived', data = data, ax = ax[1])
ax[1].set_title('Survived')
plt.show()
```


    
![2023-07-03-EDA_8_0](https://github.com/SukyungJang/kaggle/assets/133842344/31ace9cf-0c1d-4514-8a73-11c0bbad650f)
    


사고에서 많은 승객이 생존하지 못한 것으로 드러납니다. <br/>

훈련 세트에는 891명의 승객이 있었는데, 그 중 약 350명만이 생존했습니다. 즉, 전체 훈련 세트 중 생존율은 약 38.4%입니다. 데이터로부터 더 나은 통찰력을 얻기 위해 더 깊게 파고들어야 하며, 어떤 카테고리의 승객이 생존했고 그렇지 않았는지 알아봐야 합니다. <br/>

데이터셋의 다양한 특성을 사용하여 생존율을 확인해 보려고 합니다. 이 중 일부 특성은 성별, 탑승 항구, 나이 등입니다. <br/>

먼저, 데이터셋의 다양한 특성을 이해해 보겠습니다.

**Types Of Features** <br/>

범주형 특성: <br/>
범주형 변수는 두 개 이상의 범주를 가지며, 해당 특성의 각 값은 그 범주에 따라 분류될 수 있습니다. 예를 들어, 성별은 두 개의 범주(남성과 여성)를 가진 범주형 변수입니다. 이와 같은 변수에는 정렬이나 순서를 부여할 수 없습니다. 이런 변수를 명목 변수라고도 합니다. <br/>

데이터셋의 범주형 특성: 성별(Sex), 탑승지(Embarked) <br/>

순서형 특성: <br/>
순서형 변수는 범주 값과 유사하지만, 그 값 사이에 상대적인 순서나 정렬이 가능한 차이가 있습니다. 예를 들어, 높이라는 특성에 Tall, Medium, Short와 같은 값이 있다면 높이는 순서형 변수입니다. 이 경우 변수 내에서 상대적인 정렬을 할 수 있습니다. <br/>

데이터셋의 순서형 특성: 객실 등급(PClass) <br/>

연속적인 특성: <br/>
특성이 최소값이나 최대값 사이의 어떤 두 점 또는 특성 열에서 값을 가질 수 있는 경우 연속적이라고 합니다. <br/>

데이터셋의 연속적인 특성: 나이(Age)

# 2. Analysing The Features

**Sex -> Categorical Feature**


```python
data.groupby(['Sex', 'Survived'])['Survived'].count()
```




    Sex     Survived
    female  0            81
            1           233
    male    0           468
            1           109
    Name: Survived, dtype: int64




```python
f, ax = plt.subplots(1, 2, figsize = (18, 8))
data[['Sex', 'Survived']].groupby(['Sex']).mean().plot.bar(ax = ax[0])
ax[0].set_title('Survived vs Sex')
sns.countplot(x = 'Sex', hue = 'Survived', data = data, ax = ax[1])
ax[1].set_title('Sex:Survived vs Dead')
plt.show()
```


    
![2023-07-03-EDA_14_0](https://github.com/SukyungJang/kaggle/assets/133842344/4fb5705e-c6a7-4af0-8b4c-448f5aa39405)
    


배에 탑승한 남성의 수는 여성의 수보다 훨씬 많습니다. 그럼에도 불구하고, 구조된 여성의 수는 남성의 거의 두 배입니다. 배에 탑승한 여성의 생존율은 약 75%이고, 남성의 생존율은 약 18~19%입니다. <br/>

이것은 모델링에 매우 중요한 특성으로 보입니다. 하지만 다른 특성도 확인해보겠습니다.

**Pclass -> Ordinal Feature


```python
pd.crosstab(data.Pclass, data.Survived, margins = True).style.background_gradient(cmap = 'summer_r')
```




<style type="text/css">
#T_c8a96_row0_col0, #T_c8a96_row1_col1, #T_c8a96_row1_col2 {
  background-color: #ffff66;
  color: #000000;
}
#T_c8a96_row0_col1 {
  background-color: #cee666;
  color: #000000;
}
#T_c8a96_row0_col2 {
  background-color: #f4fa66;
  color: #000000;
}
#T_c8a96_row1_col0 {
  background-color: #f6fa66;
  color: #000000;
}
#T_c8a96_row2_col0 {
  background-color: #60b066;
  color: #f1f1f1;
}
#T_c8a96_row2_col1 {
  background-color: #dfef66;
  color: #000000;
}
#T_c8a96_row2_col2 {
  background-color: #90c866;
  color: #000000;
}
#T_c8a96_row3_col0, #T_c8a96_row3_col1, #T_c8a96_row3_col2 {
  background-color: #008066;
  color: #f1f1f1;
}
</style>
<table id="T_c8a96">
  <thead>
    <tr>
      <th class="index_name level0" >Survived</th>
      <th id="T_c8a96_level0_col0" class="col_heading level0 col0" >0</th>
      <th id="T_c8a96_level0_col1" class="col_heading level0 col1" >1</th>
      <th id="T_c8a96_level0_col2" class="col_heading level0 col2" >All</th>
    </tr>
    <tr>
      <th class="index_name level0" >Pclass</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_c8a96_level0_row0" class="row_heading level0 row0" >1</th>
      <td id="T_c8a96_row0_col0" class="data row0 col0" >80</td>
      <td id="T_c8a96_row0_col1" class="data row0 col1" >136</td>
      <td id="T_c8a96_row0_col2" class="data row0 col2" >216</td>
    </tr>
    <tr>
      <th id="T_c8a96_level0_row1" class="row_heading level0 row1" >2</th>
      <td id="T_c8a96_row1_col0" class="data row1 col0" >97</td>
      <td id="T_c8a96_row1_col1" class="data row1 col1" >87</td>
      <td id="T_c8a96_row1_col2" class="data row1 col2" >184</td>
    </tr>
    <tr>
      <th id="T_c8a96_level0_row2" class="row_heading level0 row2" >3</th>
      <td id="T_c8a96_row2_col0" class="data row2 col0" >372</td>
      <td id="T_c8a96_row2_col1" class="data row2 col1" >119</td>
      <td id="T_c8a96_row2_col2" class="data row2 col2" >491</td>
    </tr>
    <tr>
      <th id="T_c8a96_level0_row3" class="row_heading level0 row3" >All</th>
      <td id="T_c8a96_row3_col0" class="data row3 col0" >549</td>
      <td id="T_c8a96_row3_col1" class="data row3 col1" >342</td>
      <td id="T_c8a96_row3_col2" class="data row3 col2" >891</td>
    </tr>
  </tbody>
</table>





```python
f, ax = plt.subplots(1, 2, figsize = (18, 8))
data['Pclass'].value_counts().plot.bar(color = ['#CD7F32', '#FFDF00', '#D3D3D3'], ax = ax[0])
ax[0].set_title('Number Of Passengers By Pclass')
ax[0].set_ylabel('Count')
sns.countplot(x = 'Pclass', hue = 'Survived', data = data, ax = ax[1])
ax[1].set_title('Pclass:Survived vs Dead')
plt.show()
```


    
![2023-07-03-EDA_18_0](https://github.com/SukyungJang/kaggle/assets/133842344/4b744011-e57d-4fa6-9adb-b541574e823f)
    


우리는 명백히 1등석(Pclass 1) 승객들이 구조 작업에서 매우 높은 우선순위를 받았다는 것을 알 수 있습니다. 3등석(Pclass 3) 승객의 수가 훨씬 더 많았음에도 불구하고, 그들의 생존율은 매우 낮았습니다. 약 25% 정도로 나타났습니다. <br/>

1등석의 생존율은 약 63%이고, 2등석은 약 48%입니다. 따라서 돈과 지위가 중요한 요소입니다. <br/>

이제는 성별과 좌석 등급(Pclass)을 함께 고려한 생존율을 확인해 보겠습니다.


```python
pd.crosstab([data.Sex, data.Survived], data.Pclass, margins = True).style.background_gradient(cmap = 'summer_r')
```




<style type="text/css">
#T_c14b2_row0_col0, #T_c14b2_row0_col1, #T_c14b2_row0_col3, #T_c14b2_row3_col2 {
  background-color: #ffff66;
  color: #000000;
}
#T_c14b2_row0_col2, #T_c14b2_row1_col2 {
  background-color: #f1f866;
  color: #000000;
}
#T_c14b2_row1_col0 {
  background-color: #96cb66;
  color: #000000;
}
#T_c14b2_row1_col1 {
  background-color: #a3d166;
  color: #000000;
}
#T_c14b2_row1_col3 {
  background-color: #cfe766;
  color: #000000;
}
#T_c14b2_row2_col0 {
  background-color: #a7d366;
  color: #000000;
}
#T_c14b2_row2_col1, #T_c14b2_row2_col3 {
  background-color: #85c266;
  color: #000000;
}
#T_c14b2_row2_col2 {
  background-color: #6eb666;
  color: #f1f1f1;
}
#T_c14b2_row3_col0 {
  background-color: #cde666;
  color: #000000;
}
#T_c14b2_row3_col1 {
  background-color: #f0f866;
  color: #000000;
}
#T_c14b2_row3_col3 {
  background-color: #f7fb66;
  color: #000000;
}
#T_c14b2_row4_col0, #T_c14b2_row4_col1, #T_c14b2_row4_col2, #T_c14b2_row4_col3 {
  background-color: #008066;
  color: #f1f1f1;
}
</style>
<table id="T_c14b2">
  <thead>
    <tr>
      <th class="blank" >&nbsp;</th>
      <th class="index_name level0" >Pclass</th>
      <th id="T_c14b2_level0_col0" class="col_heading level0 col0" >1</th>
      <th id="T_c14b2_level0_col1" class="col_heading level0 col1" >2</th>
      <th id="T_c14b2_level0_col2" class="col_heading level0 col2" >3</th>
      <th id="T_c14b2_level0_col3" class="col_heading level0 col3" >All</th>
    </tr>
    <tr>
      <th class="index_name level0" >Sex</th>
      <th class="index_name level1" >Survived</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_c14b2_level0_row0" class="row_heading level0 row0" rowspan="2">female</th>
      <th id="T_c14b2_level1_row0" class="row_heading level1 row0" >0</th>
      <td id="T_c14b2_row0_col0" class="data row0 col0" >3</td>
      <td id="T_c14b2_row0_col1" class="data row0 col1" >6</td>
      <td id="T_c14b2_row0_col2" class="data row0 col2" >72</td>
      <td id="T_c14b2_row0_col3" class="data row0 col3" >81</td>
    </tr>
    <tr>
      <th id="T_c14b2_level1_row1" class="row_heading level1 row1" >1</th>
      <td id="T_c14b2_row1_col0" class="data row1 col0" >91</td>
      <td id="T_c14b2_row1_col1" class="data row1 col1" >70</td>
      <td id="T_c14b2_row1_col2" class="data row1 col2" >72</td>
      <td id="T_c14b2_row1_col3" class="data row1 col3" >233</td>
    </tr>
    <tr>
      <th id="T_c14b2_level0_row2" class="row_heading level0 row2" rowspan="2">male</th>
      <th id="T_c14b2_level1_row2" class="row_heading level1 row2" >0</th>
      <td id="T_c14b2_row2_col0" class="data row2 col0" >77</td>
      <td id="T_c14b2_row2_col1" class="data row2 col1" >91</td>
      <td id="T_c14b2_row2_col2" class="data row2 col2" >300</td>
      <td id="T_c14b2_row2_col3" class="data row2 col3" >468</td>
    </tr>
    <tr>
      <th id="T_c14b2_level1_row3" class="row_heading level1 row3" >1</th>
      <td id="T_c14b2_row3_col0" class="data row3 col0" >45</td>
      <td id="T_c14b2_row3_col1" class="data row3 col1" >17</td>
      <td id="T_c14b2_row3_col2" class="data row3 col2" >47</td>
      <td id="T_c14b2_row3_col3" class="data row3 col3" >109</td>
    </tr>
    <tr>
      <th id="T_c14b2_level0_row4" class="row_heading level0 row4" >All</th>
      <th id="T_c14b2_level1_row4" class="row_heading level1 row4" ></th>
      <td id="T_c14b2_row4_col0" class="data row4 col0" >216</td>
      <td id="T_c14b2_row4_col1" class="data row4 col1" >184</td>
      <td id="T_c14b2_row4_col2" class="data row4 col2" >491</td>
      <td id="T_c14b2_row4_col3" class="data row4 col3" >891</td>
    </tr>
  </tbody>
</table>





```python
sns.catplot(x = 'Pclass', y = 'Survived', hue = 'Sex', data = data, kind = 'point')
plt.show()
```


    
![2023-07-03-EDA_21_0](https://github.com/SukyungJang/kaggle/assets/133842344/abe99640-cc5e-4490-8c7c-fa707c61111e)
    


CrossTab과 Catplot을 살펴보면, Pclass1의 여성 중 94명 중 3명만 사망하여 여성의 생존율이 약 95% - 96%라는 것을 쉽게 알 수 있습니다. <br/>

Pclass에 상관없이 여성이 구조 작업에서 우선순위를 받았다는 것은 분명합니다. 심지어 Pclass1의 남성들도 매우 낮은 생존율을 가지고 있습니다. <br/>

Pclass도 중요한 특성으로 보여집니다. 다른 특성을 분석해 보겠습니다.

**Age -> Countinous Feature**


```python
print('Oldest Passenger was of:', data['Age'].max(), 'Years')
print('Youngest Passenger was of:', data['Age'].min(), 'Years')
print('Average Age on the ship:', data['Age'].mean(), 'Years')
```

    Oldest Passenger was of: 80.0 Years
    Youngest Passenger was of: 0.42 Years
    Average Age on the ship: 29.69911764705882 Years
    


```python
f, ax = plt.subplots(1, 2, figsize = (18, 8))
sns.violinplot(x = "Pclass", y = "Age", hue = "Survived", data = data, split = True, ax = ax[0])
ax[0].set_title('Pclass and Age vs Survived')
ax[0].set_yticks(range(0, 110, 10))
sns.violinplot(x = "Sex", y = "Age", hue = "Survived", data = data, split = True, ax = ax[1])
ax[1].set_title('Sex and Age vs Survived')
ax[1].set_yticks(range(0, 110, 10))
plt.show()
```


    
![2023-07-03-EDA_25_0](https://github.com/SukyungJang/kaggle/assets/133842344/d883324b-4b20-4b6b-ab96-c4d78adc6a5b)
    


관찰 결과: <br/>
1. 어린이의 경우 Pclass가 증가함에 따라 어린이의 수도 증가하며, Pclass에 관계없이 10세 미만(즉, 어린이)의 생존율이 좋아 보입니다.
2. 20-50세의 Pclass 1 승객의 생존 가능성이 높으며, 여성에게는 더욱 좋습니다.
3. 남성의 경우 나이가 증가함에 따라 생존 가능성이 감소합니다. <br/>

이전에 보았듯이, 나이 특성에는 177개의 Null 값이 있습니다. 이러한 NaN 값을 대체하기 위해 데이터셋의 평균 나이를 할당할 수 있습니다. 그러나 문제는 다양한 연령대의 사람들이 많이 있었습니다. 4세 어린이에게 29세인 평균 나이를 할당할 수는 없습니다. 승객이 어느 연령대에 속하는지 알아낼 방법이 있을까요? <br/>

이름 특성을 살펴보면 이름에는 Mr 또는 Mrs와 같은 호칭이 있습니다. 따라서 Mr 및 Mrs의 평균값을 해당 그룹에 할당할 수 있습니다.


```python
data['Initial'] = 0
for i in data:
    data['Initial'] = data.Name.str.extract('([A-Za-z]+)\.') # lets extract the salutations
```

여기서는 정규식[A-Za-z]+)를 사용합니다. 이 정규식은 A-Z 또는 a-z 사이에 위치한 문자열을 찾고 마침표(.)가 뒤따르는 문자열을 찾습니다. 이렇게 함으로써 이름에서 이니셜을 성공적으로 추출할 수 있습니다.


```python
pd.crosstab(data.Initial, data.Sex).T.style.background_gradient(cmap = 'summer_r') # Checking the Initials with the Sex
```




<style type="text/css">
#T_e6843_row0_col0, #T_e6843_row0_col1, #T_e6843_row0_col3, #T_e6843_row0_col4, #T_e6843_row0_col5, #T_e6843_row0_col7, #T_e6843_row0_col8, #T_e6843_row0_col12, #T_e6843_row0_col15, #T_e6843_row0_col16, #T_e6843_row1_col2, #T_e6843_row1_col6, #T_e6843_row1_col9, #T_e6843_row1_col10, #T_e6843_row1_col11, #T_e6843_row1_col13, #T_e6843_row1_col14 {
  background-color: #ffff66;
  color: #000000;
}
#T_e6843_row0_col2, #T_e6843_row0_col6, #T_e6843_row0_col9, #T_e6843_row0_col10, #T_e6843_row0_col11, #T_e6843_row0_col13, #T_e6843_row0_col14, #T_e6843_row1_col0, #T_e6843_row1_col1, #T_e6843_row1_col3, #T_e6843_row1_col4, #T_e6843_row1_col5, #T_e6843_row1_col7, #T_e6843_row1_col8, #T_e6843_row1_col12, #T_e6843_row1_col15, #T_e6843_row1_col16 {
  background-color: #008066;
  color: #f1f1f1;
}
</style>
<table id="T_e6843">
  <thead>
    <tr>
      <th class="index_name level0" >Initial</th>
      <th id="T_e6843_level0_col0" class="col_heading level0 col0" >Capt</th>
      <th id="T_e6843_level0_col1" class="col_heading level0 col1" >Col</th>
      <th id="T_e6843_level0_col2" class="col_heading level0 col2" >Countess</th>
      <th id="T_e6843_level0_col3" class="col_heading level0 col3" >Don</th>
      <th id="T_e6843_level0_col4" class="col_heading level0 col4" >Dr</th>
      <th id="T_e6843_level0_col5" class="col_heading level0 col5" >Jonkheer</th>
      <th id="T_e6843_level0_col6" class="col_heading level0 col6" >Lady</th>
      <th id="T_e6843_level0_col7" class="col_heading level0 col7" >Major</th>
      <th id="T_e6843_level0_col8" class="col_heading level0 col8" >Master</th>
      <th id="T_e6843_level0_col9" class="col_heading level0 col9" >Miss</th>
      <th id="T_e6843_level0_col10" class="col_heading level0 col10" >Mlle</th>
      <th id="T_e6843_level0_col11" class="col_heading level0 col11" >Mme</th>
      <th id="T_e6843_level0_col12" class="col_heading level0 col12" >Mr</th>
      <th id="T_e6843_level0_col13" class="col_heading level0 col13" >Mrs</th>
      <th id="T_e6843_level0_col14" class="col_heading level0 col14" >Ms</th>
      <th id="T_e6843_level0_col15" class="col_heading level0 col15" >Rev</th>
      <th id="T_e6843_level0_col16" class="col_heading level0 col16" >Sir</th>
    </tr>
    <tr>
      <th class="index_name level0" >Sex</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
      <th class="blank col4" >&nbsp;</th>
      <th class="blank col5" >&nbsp;</th>
      <th class="blank col6" >&nbsp;</th>
      <th class="blank col7" >&nbsp;</th>
      <th class="blank col8" >&nbsp;</th>
      <th class="blank col9" >&nbsp;</th>
      <th class="blank col10" >&nbsp;</th>
      <th class="blank col11" >&nbsp;</th>
      <th class="blank col12" >&nbsp;</th>
      <th class="blank col13" >&nbsp;</th>
      <th class="blank col14" >&nbsp;</th>
      <th class="blank col15" >&nbsp;</th>
      <th class="blank col16" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_e6843_level0_row0" class="row_heading level0 row0" >female</th>
      <td id="T_e6843_row0_col0" class="data row0 col0" >0</td>
      <td id="T_e6843_row0_col1" class="data row0 col1" >0</td>
      <td id="T_e6843_row0_col2" class="data row0 col2" >1</td>
      <td id="T_e6843_row0_col3" class="data row0 col3" >0</td>
      <td id="T_e6843_row0_col4" class="data row0 col4" >1</td>
      <td id="T_e6843_row0_col5" class="data row0 col5" >0</td>
      <td id="T_e6843_row0_col6" class="data row0 col6" >1</td>
      <td id="T_e6843_row0_col7" class="data row0 col7" >0</td>
      <td id="T_e6843_row0_col8" class="data row0 col8" >0</td>
      <td id="T_e6843_row0_col9" class="data row0 col9" >182</td>
      <td id="T_e6843_row0_col10" class="data row0 col10" >2</td>
      <td id="T_e6843_row0_col11" class="data row0 col11" >1</td>
      <td id="T_e6843_row0_col12" class="data row0 col12" >0</td>
      <td id="T_e6843_row0_col13" class="data row0 col13" >125</td>
      <td id="T_e6843_row0_col14" class="data row0 col14" >1</td>
      <td id="T_e6843_row0_col15" class="data row0 col15" >0</td>
      <td id="T_e6843_row0_col16" class="data row0 col16" >0</td>
    </tr>
    <tr>
      <th id="T_e6843_level0_row1" class="row_heading level0 row1" >male</th>
      <td id="T_e6843_row1_col0" class="data row1 col0" >1</td>
      <td id="T_e6843_row1_col1" class="data row1 col1" >2</td>
      <td id="T_e6843_row1_col2" class="data row1 col2" >0</td>
      <td id="T_e6843_row1_col3" class="data row1 col3" >1</td>
      <td id="T_e6843_row1_col4" class="data row1 col4" >6</td>
      <td id="T_e6843_row1_col5" class="data row1 col5" >1</td>
      <td id="T_e6843_row1_col6" class="data row1 col6" >0</td>
      <td id="T_e6843_row1_col7" class="data row1 col7" >2</td>
      <td id="T_e6843_row1_col8" class="data row1 col8" >40</td>
      <td id="T_e6843_row1_col9" class="data row1 col9" >0</td>
      <td id="T_e6843_row1_col10" class="data row1 col10" >0</td>
      <td id="T_e6843_row1_col11" class="data row1 col11" >0</td>
      <td id="T_e6843_row1_col12" class="data row1 col12" >517</td>
      <td id="T_e6843_row1_col13" class="data row1 col13" >0</td>
      <td id="T_e6843_row1_col14" class="data row1 col14" >0</td>
      <td id="T_e6843_row1_col15" class="data row1 col15" >6</td>
      <td id="T_e6843_row1_col16" class="data row1 col16" >1</td>
    </tr>
  </tbody>
</table>




Mlle 또는 Mme와 같은 잘못된 이니셜이 있습니다. 이들을 Miss로 대체하겠습니다.


```python
data['Initial'].replace(['Mlle', 'Mme', 'Ms', 'Dr', 'Major', 'Lady', 'Countess', 'Jonkheer', 'Col', 'Rev', 'Capt', 'Sir', 'Don'],
                        ['Miss', 'Miss', 'Miss', 'Mr', 'Mr', 'Mrs', 'Mrs', 'Other', 'Other', 'Other', 'Mr', 'Mr', 'Mr'], inplace = True)
```


```python
data.groupby('Initial')['Age'].mean() # lets check the average age by Initials
```




    Initial
    Master     4.574167
    Miss      21.860000
    Mr        32.739609
    Mrs       35.981818
    Other     45.888889
    Name: Age, dtype: float64



**Filling NaN Ages**


```python
## Assigning the NaN Values with the Ceil values of the mean ages
data.loc[(data.Age.isnull())&(data.Initial == 'Mr'), 'Age'] = 33
data.loc[(data.Age.isnull())&(data.Initial == 'Mrs'), 'Age'] = 36
data.loc[(data.Age.isnull())&(data.Initial == 'Master'), 'Age'] = 5
data.loc[(data.Age.isnull())&(data.Initial == 'Miss'), 'Age'] = 22
data.loc[(data.Age.isnull())&(data.Initial == 'Other'), 'Age'] = 46
```


```python
data.Age.isnull().any() # So no null values left finally
```




    False




```python
f, ax = plt.subplots(1, 2, figsize = (20, 10))
data[data['Survived'] == 0].Age.plot.hist(ax = ax[0], bins = 20, edgecolor = 'black', color = 'red')
ax[0].set_title('Survived = 0')
x1 = list(range(0, 85, 5))
ax[0].set_xticks(x1)
data[data['Survived'] == 1].Age.plot.hist(ax = ax[1], color = 'green', bins = 20, edgecolor = 'black')
ax[1].set_title('Survived = 1')
x2 = list(range(0, 85, 5))
ax[1].set_xticks(x2)
plt.show()
```


    
![2023-07-03-EDA_36_0](https://github.com/SukyungJang/kaggle/assets/133842344/14279d1c-e1b1-4fc1-8266-e7e85c0f51c5)
    


관찰 결과: <br/>
1. 5세 미만의 어린이들은 많은 수로 구조되었습니다.(여성과 아이를 먼저 구조하는 정책).
2. 가장 나이 많은 승객도 구조되었습니다(80세).
3. 가장 많은 사망자는 30-40세 연령 그룹에 속했습니다.


```python
sns.catplot(x = 'Pclass', y = 'Survived', col = 'Initial', data = data, kind = 'point')
plt.show()
```


    
![2023-07-03-EDA_38_0](https://github.com/SukyungJang/kaggle/assets/133842344/f92f2110-fc3e-4525-82dd-e82cca33a850)
    


따라서 여성과 어린이를 먼저 구조하는 정책은 등급에 관계없이 유효합니다.

**Embarked -> Categorical Value**


```python
pd.crosstab([data.Embarked, data.Pclass], [data.Sex, data.Survived], margins = True).style.background_gradient(cmap = 'summer_r')
```




<style type="text/css">
#T_517fe_row0_col0, #T_517fe_row1_col2 {
  background-color: #fcfe66;
  color: #000000;
}
#T_517fe_row0_col1 {
  background-color: #d2e866;
  color: #000000;
}
#T_517fe_row0_col2 {
  background-color: #f2f866;
  color: #000000;
}
#T_517fe_row0_col3 {
  background-color: #d8ec66;
  color: #000000;
}
#T_517fe_row0_col4, #T_517fe_row2_col3 {
  background-color: #e8f466;
  color: #000000;
}
#T_517fe_row1_col0, #T_517fe_row3_col0, #T_517fe_row3_col1, #T_517fe_row3_col2, #T_517fe_row3_col3, #T_517fe_row3_col4, #T_517fe_row4_col0, #T_517fe_row4_col2, #T_517fe_row4_col3, #T_517fe_row4_col4 {
  background-color: #ffff66;
  color: #000000;
}
#T_517fe_row1_col1, #T_517fe_row6_col0 {
  background-color: #f9fc66;
  color: #000000;
}
#T_517fe_row1_col3, #T_517fe_row1_col4 {
  background-color: #fbfd66;
  color: #000000;
}
#T_517fe_row2_col0, #T_517fe_row5_col1 {
  background-color: #e6f266;
  color: #000000;
}
#T_517fe_row2_col1 {
  background-color: #f0f866;
  color: #000000;
}
#T_517fe_row2_col2 {
  background-color: #eef666;
  color: #000000;
}
#T_517fe_row2_col4, #T_517fe_row7_col0 {
  background-color: #edf666;
  color: #000000;
}
#T_517fe_row4_col1 {
  background-color: #fefe66;
  color: #000000;
}
#T_517fe_row5_col0 {
  background-color: #e3f166;
  color: #000000;
}
#T_517fe_row5_col2 {
  background-color: #ecf666;
  color: #000000;
}
#T_517fe_row5_col3 {
  background-color: #f8fc66;
  color: #000000;
}
#T_517fe_row5_col4 {
  background-color: #ebf566;
  color: #000000;
}
#T_517fe_row6_col1 {
  background-color: #cde666;
  color: #000000;
}
#T_517fe_row6_col2 {
  background-color: #e4f266;
  color: #000000;
}
#T_517fe_row6_col3 {
  background-color: #bede66;
  color: #000000;
}
#T_517fe_row6_col4 {
  background-color: #dbed66;
  color: #000000;
}
#T_517fe_row7_col1 {
  background-color: #bdde66;
  color: #000000;
}
#T_517fe_row7_col2 {
  background-color: #d3e966;
  color: #000000;
}
#T_517fe_row7_col3, #T_517fe_row8_col1 {
  background-color: #dcee66;
  color: #000000;
}
#T_517fe_row7_col4 {
  background-color: #d1e866;
  color: #000000;
}
#T_517fe_row8_col0 {
  background-color: #52a866;
  color: #f1f1f1;
}
#T_517fe_row8_col2 {
  background-color: #81c066;
  color: #000000;
}
#T_517fe_row8_col3 {
  background-color: #b0d866;
  color: #000000;
}
#T_517fe_row8_col4 {
  background-color: #9acc66;
  color: #000000;
}
#T_517fe_row9_col0, #T_517fe_row9_col1, #T_517fe_row9_col2, #T_517fe_row9_col3, #T_517fe_row9_col4 {
  background-color: #008066;
  color: #f1f1f1;
}
</style>
<table id="T_517fe">
  <thead>
    <tr>
      <th class="blank" >&nbsp;</th>
      <th class="index_name level0" >Sex</th>
      <th id="T_517fe_level0_col0" class="col_heading level0 col0" colspan="2">female</th>
      <th id="T_517fe_level0_col2" class="col_heading level0 col2" colspan="2">male</th>
      <th id="T_517fe_level0_col4" class="col_heading level0 col4" >All</th>
    </tr>
    <tr>
      <th class="blank" >&nbsp;</th>
      <th class="index_name level1" >Survived</th>
      <th id="T_517fe_level1_col0" class="col_heading level1 col0" >0</th>
      <th id="T_517fe_level1_col1" class="col_heading level1 col1" >1</th>
      <th id="T_517fe_level1_col2" class="col_heading level1 col2" >0</th>
      <th id="T_517fe_level1_col3" class="col_heading level1 col3" >1</th>
      <th id="T_517fe_level1_col4" class="col_heading level1 col4" ></th>
    </tr>
    <tr>
      <th class="index_name level0" >Embarked</th>
      <th class="index_name level1" >Pclass</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
      <th class="blank col4" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_517fe_level0_row0" class="row_heading level0 row0" rowspan="3">C</th>
      <th id="T_517fe_level1_row0" class="row_heading level1 row0" >1</th>
      <td id="T_517fe_row0_col0" class="data row0 col0" >1</td>
      <td id="T_517fe_row0_col1" class="data row0 col1" >42</td>
      <td id="T_517fe_row0_col2" class="data row0 col2" >25</td>
      <td id="T_517fe_row0_col3" class="data row0 col3" >17</td>
      <td id="T_517fe_row0_col4" class="data row0 col4" >85</td>
    </tr>
    <tr>
      <th id="T_517fe_level1_row1" class="row_heading level1 row1" >2</th>
      <td id="T_517fe_row1_col0" class="data row1 col0" >0</td>
      <td id="T_517fe_row1_col1" class="data row1 col1" >7</td>
      <td id="T_517fe_row1_col2" class="data row1 col2" >8</td>
      <td id="T_517fe_row1_col3" class="data row1 col3" >2</td>
      <td id="T_517fe_row1_col4" class="data row1 col4" >17</td>
    </tr>
    <tr>
      <th id="T_517fe_level1_row2" class="row_heading level1 row2" >3</th>
      <td id="T_517fe_row2_col0" class="data row2 col0" >8</td>
      <td id="T_517fe_row2_col1" class="data row2 col1" >15</td>
      <td id="T_517fe_row2_col2" class="data row2 col2" >33</td>
      <td id="T_517fe_row2_col3" class="data row2 col3" >10</td>
      <td id="T_517fe_row2_col4" class="data row2 col4" >66</td>
    </tr>
    <tr>
      <th id="T_517fe_level0_row3" class="row_heading level0 row3" rowspan="3">Q</th>
      <th id="T_517fe_level1_row3" class="row_heading level1 row3" >1</th>
      <td id="T_517fe_row3_col0" class="data row3 col0" >0</td>
      <td id="T_517fe_row3_col1" class="data row3 col1" >1</td>
      <td id="T_517fe_row3_col2" class="data row3 col2" >1</td>
      <td id="T_517fe_row3_col3" class="data row3 col3" >0</td>
      <td id="T_517fe_row3_col4" class="data row3 col4" >2</td>
    </tr>
    <tr>
      <th id="T_517fe_level1_row4" class="row_heading level1 row4" >2</th>
      <td id="T_517fe_row4_col0" class="data row4 col0" >0</td>
      <td id="T_517fe_row4_col1" class="data row4 col1" >2</td>
      <td id="T_517fe_row4_col2" class="data row4 col2" >1</td>
      <td id="T_517fe_row4_col3" class="data row4 col3" >0</td>
      <td id="T_517fe_row4_col4" class="data row4 col4" >3</td>
    </tr>
    <tr>
      <th id="T_517fe_level1_row5" class="row_heading level1 row5" >3</th>
      <td id="T_517fe_row5_col0" class="data row5 col0" >9</td>
      <td id="T_517fe_row5_col1" class="data row5 col1" >24</td>
      <td id="T_517fe_row5_col2" class="data row5 col2" >36</td>
      <td id="T_517fe_row5_col3" class="data row5 col3" >3</td>
      <td id="T_517fe_row5_col4" class="data row5 col4" >72</td>
    </tr>
    <tr>
      <th id="T_517fe_level0_row6" class="row_heading level0 row6" rowspan="3">S</th>
      <th id="T_517fe_level1_row6" class="row_heading level1 row6" >1</th>
      <td id="T_517fe_row6_col0" class="data row6 col0" >2</td>
      <td id="T_517fe_row6_col1" class="data row6 col1" >46</td>
      <td id="T_517fe_row6_col2" class="data row6 col2" >51</td>
      <td id="T_517fe_row6_col3" class="data row6 col3" >28</td>
      <td id="T_517fe_row6_col4" class="data row6 col4" >127</td>
    </tr>
    <tr>
      <th id="T_517fe_level1_row7" class="row_heading level1 row7" >2</th>
      <td id="T_517fe_row7_col0" class="data row7 col0" >6</td>
      <td id="T_517fe_row7_col1" class="data row7 col1" >61</td>
      <td id="T_517fe_row7_col2" class="data row7 col2" >82</td>
      <td id="T_517fe_row7_col3" class="data row7 col3" >15</td>
      <td id="T_517fe_row7_col4" class="data row7 col4" >164</td>
    </tr>
    <tr>
      <th id="T_517fe_level1_row8" class="row_heading level1 row8" >3</th>
      <td id="T_517fe_row8_col0" class="data row8 col0" >55</td>
      <td id="T_517fe_row8_col1" class="data row8 col1" >33</td>
      <td id="T_517fe_row8_col2" class="data row8 col2" >231</td>
      <td id="T_517fe_row8_col3" class="data row8 col3" >34</td>
      <td id="T_517fe_row8_col4" class="data row8 col4" >353</td>
    </tr>
    <tr>
      <th id="T_517fe_level0_row9" class="row_heading level0 row9" >All</th>
      <th id="T_517fe_level1_row9" class="row_heading level1 row9" ></th>
      <td id="T_517fe_row9_col0" class="data row9 col0" >81</td>
      <td id="T_517fe_row9_col1" class="data row9 col1" >231</td>
      <td id="T_517fe_row9_col2" class="data row9 col2" >468</td>
      <td id="T_517fe_row9_col3" class="data row9 col3" >109</td>
      <td id="T_517fe_row9_col4" class="data row9 col4" >889</td>
    </tr>
  </tbody>
</table>




**Chances for Survival by Port Of Embarkation**


```python
sns.catplot(x = 'Embarked', y = 'Survived', data = data, kind = 'point')
fig = plt.gcf() # 현재 활성화된 figure 객체 반환
fig.set_size_inches(5, 3)
plt.show()
```


    
![2023-07-03-EDA_43_0](https://github.com/SukyungJang/kaggle/assets/133842344/3ccf0df2-0d5a-450e-b8e4-77fcfa212e24)
    


C 항구의 생존 가능성은 0.55정도로 가장 높으며, S 항구에서 가장 낮습니다.


```python
f, ax = plt.subplots(2, 2, figsize = (20, 15))
sns.countplot(x = 'Embarked', data = data, ax = ax[0, 0])
ax[0, 0].set_title('No. Of Passengers Boarded')
sns.countplot(x = 'Embarked', hue = 'Sex', data = data, ax = ax[0, 1])
ax[0, 1].set_title('Male-Female Split for Embarked')
sns.countplot(x = 'Embarked', hue = 'Survived', data = data, ax = ax[1, 0])
ax[1, 0].set_title('Embarked vs Survived')
sns.countplot(x = 'Embarked', hue = 'Pclass', data = data, ax = ax[1, 1])
ax[1, 1].set_title('Embarked vs Pclass')
plt.subplots_adjust(wspace = 0.2, hspace = 0.5)
plt.show()
```


    
![2023-07-03-EDA_45_0](https://github.com/SukyungJang/kaggle/assets/133842344/b7f821a7-a360-42c1-a7f7-b72b1ec0cc16)
    


관찰 결과: <br/>

1. 가장 많은 승객이 S에서 탑승했습니다. 그 중 대부분은 Pclass 3의 승객입니다.
2. C에서 탑승한 승객은 생존율이 상당히 높아 보입니다. 이는 Pclass 1 및 Pclass 2 승객이 모두 구조되었기 때문일 수 있습니다.
3. S 탑승지는 부유한 사람들이 주로 탑승한 항구로 보입니다. 그럼에도 불구하고 생존 가능성이 낮습니다. 이는 Pclass 3 승객의 약 81%가 생존하지 못했기 때문입니다.
4. Q 항구의 승객 중 거의 95%는 Pclass 3 승객이었습니다.


```python
sns.catplot(x = 'Pclass', y = 'Survived', hue = 'Sex', col = 'Embarked', data = data, kind = 'point')
plt.show()
```


    
![2023-07-03-EDA_47_0](https://github.com/SukyungJang/kaggle/assets/133842344/96b23e3b-478f-499c-8ac7-01419cdb19e5)
    


관찰 결과: <br/>

1. Pclass 1과 Pclass 2의 여성의 경우, Pclass와 관계없이 생존 가능성이 거의 1입니다.
2. S 항구는 Pclass 3 승객에게 매우 불운한 항구로 보입니다. 남성과 여성의 생존율이 매우 낮습니다.
3. Q 항구는 대부분이 Pclass 3 승객으로 구성되어 있어 남성에게 가장 불운한 항구로 보입니다.

**Filling Embarked NaN** <br/>
S 항구에서 가장 많은 승객이 탑승한 것을 알았으므로 NaN 값을 S로 대체합니다.


```python
data['Embarked'].fillna('S', inplace = True)
```


```python
data.Embarked.isnull().any() # Finally No NaN values
```




    False



**SibSip -> Discrete Feature** <br/>
이 기능은 개인이 혼자인지 아니면 가족 구성원과 함께 있는지를 나타냅니다. <br/>
Sibling = 형제, 자매, 이복형제, 이복자매 <br/>
Spouse = 남편, 아내


```python
pd.crosstab([data.SibSp], data.Survived).style.background_gradient(cmap = 'summer_r')
```




<style type="text/css">
#T_4a902_row0_col0, #T_4a902_row0_col1 {
  background-color: #008066;
  color: #f1f1f1;
}
#T_4a902_row1_col0 {
  background-color: #c4e266;
  color: #000000;
}
#T_4a902_row1_col1 {
  background-color: #77bb66;
  color: #f1f1f1;
}
#T_4a902_row2_col0, #T_4a902_row4_col0 {
  background-color: #f9fc66;
  color: #000000;
}
#T_4a902_row2_col1 {
  background-color: #f0f866;
  color: #000000;
}
#T_4a902_row3_col0, #T_4a902_row3_col1 {
  background-color: #fbfd66;
  color: #000000;
}
#T_4a902_row4_col1 {
  background-color: #fcfe66;
  color: #000000;
}
#T_4a902_row5_col0, #T_4a902_row5_col1, #T_4a902_row6_col1 {
  background-color: #ffff66;
  color: #000000;
}
#T_4a902_row6_col0 {
  background-color: #fefe66;
  color: #000000;
}
</style>
<table id="T_4a902">
  <thead>
    <tr>
      <th class="index_name level0" >Survived</th>
      <th id="T_4a902_level0_col0" class="col_heading level0 col0" >0</th>
      <th id="T_4a902_level0_col1" class="col_heading level0 col1" >1</th>
    </tr>
    <tr>
      <th class="index_name level0" >SibSp</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_4a902_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_4a902_row0_col0" class="data row0 col0" >398</td>
      <td id="T_4a902_row0_col1" class="data row0 col1" >210</td>
    </tr>
    <tr>
      <th id="T_4a902_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_4a902_row1_col0" class="data row1 col0" >97</td>
      <td id="T_4a902_row1_col1" class="data row1 col1" >112</td>
    </tr>
    <tr>
      <th id="T_4a902_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_4a902_row2_col0" class="data row2 col0" >15</td>
      <td id="T_4a902_row2_col1" class="data row2 col1" >13</td>
    </tr>
    <tr>
      <th id="T_4a902_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_4a902_row3_col0" class="data row3 col0" >12</td>
      <td id="T_4a902_row3_col1" class="data row3 col1" >4</td>
    </tr>
    <tr>
      <th id="T_4a902_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_4a902_row4_col0" class="data row4 col0" >15</td>
      <td id="T_4a902_row4_col1" class="data row4 col1" >3</td>
    </tr>
    <tr>
      <th id="T_4a902_level0_row5" class="row_heading level0 row5" >5</th>
      <td id="T_4a902_row5_col0" class="data row5 col0" >5</td>
      <td id="T_4a902_row5_col1" class="data row5 col1" >0</td>
    </tr>
    <tr>
      <th id="T_4a902_level0_row6" class="row_heading level0 row6" >8</th>
      <td id="T_4a902_row6_col0" class="data row6 col0" >7</td>
      <td id="T_4a902_row6_col1" class="data row6 col1" >0</td>
    </tr>
  </tbody>
</table>





```python
f, ax = plt.subplots(1, 2, figsize = (20, 8))
sns.barplot(x = 'SibSp', y = 'Survived', data = data, ax = ax[0])
ax[0].set_title('SibSp vs Survived')
sns.pointplot(x = 'SibSp', y = 'Survived', data = data, ax = ax[1])
ax[1].set_title('SibSp vs Survived')
plt.close(2)
plt.show()
```


    
![2023-07-03-EDA_54_0](https://github.com/SukyungJang/kaggle/assets/133842344/57eb0b8c-1aff-4820-bba4-cbf758366c5d)
    



```python
pd.crosstab(data.SibSp, data.Pclass).style.background_gradient(cmap = 'summer_r')
```




<style type="text/css">
#T_0d22c_row0_col0, #T_0d22c_row0_col1, #T_0d22c_row0_col2 {
  background-color: #008066;
  color: #f1f1f1;
}
#T_0d22c_row1_col0 {
  background-color: #7bbd66;
  color: #000000;
}
#T_0d22c_row1_col1 {
  background-color: #8ac466;
  color: #000000;
}
#T_0d22c_row1_col2 {
  background-color: #c6e266;
  color: #000000;
}
#T_0d22c_row2_col0, #T_0d22c_row4_col2 {
  background-color: #f6fa66;
  color: #000000;
}
#T_0d22c_row2_col1 {
  background-color: #eef666;
  color: #000000;
}
#T_0d22c_row2_col2 {
  background-color: #f8fc66;
  color: #000000;
}
#T_0d22c_row3_col0, #T_0d22c_row3_col2 {
  background-color: #fafc66;
  color: #000000;
}
#T_0d22c_row3_col1 {
  background-color: #fdfe66;
  color: #000000;
}
#T_0d22c_row4_col0, #T_0d22c_row4_col1, #T_0d22c_row5_col0, #T_0d22c_row5_col1, #T_0d22c_row5_col2, #T_0d22c_row6_col0, #T_0d22c_row6_col1 {
  background-color: #ffff66;
  color: #000000;
}
#T_0d22c_row6_col2 {
  background-color: #fefe66;
  color: #000000;
}
</style>
<table id="T_0d22c">
  <thead>
    <tr>
      <th class="index_name level0" >Pclass</th>
      <th id="T_0d22c_level0_col0" class="col_heading level0 col0" >1</th>
      <th id="T_0d22c_level0_col1" class="col_heading level0 col1" >2</th>
      <th id="T_0d22c_level0_col2" class="col_heading level0 col2" >3</th>
    </tr>
    <tr>
      <th class="index_name level0" >SibSp</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_0d22c_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_0d22c_row0_col0" class="data row0 col0" >137</td>
      <td id="T_0d22c_row0_col1" class="data row0 col1" >120</td>
      <td id="T_0d22c_row0_col2" class="data row0 col2" >351</td>
    </tr>
    <tr>
      <th id="T_0d22c_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_0d22c_row1_col0" class="data row1 col0" >71</td>
      <td id="T_0d22c_row1_col1" class="data row1 col1" >55</td>
      <td id="T_0d22c_row1_col2" class="data row1 col2" >83</td>
    </tr>
    <tr>
      <th id="T_0d22c_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_0d22c_row2_col0" class="data row2 col0" >5</td>
      <td id="T_0d22c_row2_col1" class="data row2 col1" >8</td>
      <td id="T_0d22c_row2_col2" class="data row2 col2" >15</td>
    </tr>
    <tr>
      <th id="T_0d22c_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_0d22c_row3_col0" class="data row3 col0" >3</td>
      <td id="T_0d22c_row3_col1" class="data row3 col1" >1</td>
      <td id="T_0d22c_row3_col2" class="data row3 col2" >12</td>
    </tr>
    <tr>
      <th id="T_0d22c_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_0d22c_row4_col0" class="data row4 col0" >0</td>
      <td id="T_0d22c_row4_col1" class="data row4 col1" >0</td>
      <td id="T_0d22c_row4_col2" class="data row4 col2" >18</td>
    </tr>
    <tr>
      <th id="T_0d22c_level0_row5" class="row_heading level0 row5" >5</th>
      <td id="T_0d22c_row5_col0" class="data row5 col0" >0</td>
      <td id="T_0d22c_row5_col1" class="data row5 col1" >0</td>
      <td id="T_0d22c_row5_col2" class="data row5 col2" >5</td>
    </tr>
    <tr>
      <th id="T_0d22c_level0_row6" class="row_heading level0 row6" >8</th>
      <td id="T_0d22c_row6_col0" class="data row6 col0" >0</td>
      <td id="T_0d22c_row6_col1" class="data row6 col1" >0</td>
      <td id="T_0d22c_row6_col2" class="data row6 col2" >7</td>
    </tr>
  </tbody>
</table>




관찰 결과: <br/>
막대 그래프와 팩터플롯은 혼자 탑승하고 형제자매가 없는 승객은 생존율이 약 34.5%인 것을 보여줍니다. 형제자매의 수가 증가할수록 생존율이 대략적으로 감소하는 것을 확인할 수 있습니다.

**Parch**


```python
pd.crosstab(data.Parch, data.Pclass).style.background_gradient(cmap = 'summer_r')
```




<style type="text/css">
#T_c310a_row0_col0, #T_c310a_row0_col1, #T_c310a_row0_col2 {
  background-color: #008066;
  color: #f1f1f1;
}
#T_c310a_row1_col0 {
  background-color: #cfe766;
  color: #000000;
}
#T_c310a_row1_col1 {
  background-color: #c2e066;
  color: #000000;
}
#T_c310a_row1_col2 {
  background-color: #dbed66;
  color: #000000;
}
#T_c310a_row2_col0 {
  background-color: #dfef66;
  color: #000000;
}
#T_c310a_row2_col1 {
  background-color: #e1f066;
  color: #000000;
}
#T_c310a_row2_col2 {
  background-color: #e3f166;
  color: #000000;
}
#T_c310a_row3_col0, #T_c310a_row4_col1, #T_c310a_row5_col0, #T_c310a_row5_col1, #T_c310a_row6_col0, #T_c310a_row6_col1, #T_c310a_row6_col2 {
  background-color: #ffff66;
  color: #000000;
}
#T_c310a_row3_col1 {
  background-color: #fcfe66;
  color: #000000;
}
#T_c310a_row3_col2, #T_c310a_row4_col0, #T_c310a_row4_col2 {
  background-color: #fefe66;
  color: #000000;
}
#T_c310a_row5_col2 {
  background-color: #fdfe66;
  color: #000000;
}
</style>
<table id="T_c310a">
  <thead>
    <tr>
      <th class="index_name level0" >Pclass</th>
      <th id="T_c310a_level0_col0" class="col_heading level0 col0" >1</th>
      <th id="T_c310a_level0_col1" class="col_heading level0 col1" >2</th>
      <th id="T_c310a_level0_col2" class="col_heading level0 col2" >3</th>
    </tr>
    <tr>
      <th class="index_name level0" >Parch</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_c310a_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_c310a_row0_col0" class="data row0 col0" >163</td>
      <td id="T_c310a_row0_col1" class="data row0 col1" >134</td>
      <td id="T_c310a_row0_col2" class="data row0 col2" >381</td>
    </tr>
    <tr>
      <th id="T_c310a_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_c310a_row1_col0" class="data row1 col0" >31</td>
      <td id="T_c310a_row1_col1" class="data row1 col1" >32</td>
      <td id="T_c310a_row1_col2" class="data row1 col2" >55</td>
    </tr>
    <tr>
      <th id="T_c310a_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_c310a_row2_col0" class="data row2 col0" >21</td>
      <td id="T_c310a_row2_col1" class="data row2 col1" >16</td>
      <td id="T_c310a_row2_col2" class="data row2 col2" >43</td>
    </tr>
    <tr>
      <th id="T_c310a_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_c310a_row3_col0" class="data row3 col0" >0</td>
      <td id="T_c310a_row3_col1" class="data row3 col1" >2</td>
      <td id="T_c310a_row3_col2" class="data row3 col2" >3</td>
    </tr>
    <tr>
      <th id="T_c310a_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_c310a_row4_col0" class="data row4 col0" >1</td>
      <td id="T_c310a_row4_col1" class="data row4 col1" >0</td>
      <td id="T_c310a_row4_col2" class="data row4 col2" >3</td>
    </tr>
    <tr>
      <th id="T_c310a_level0_row5" class="row_heading level0 row5" >5</th>
      <td id="T_c310a_row5_col0" class="data row5 col0" >0</td>
      <td id="T_c310a_row5_col1" class="data row5 col1" >0</td>
      <td id="T_c310a_row5_col2" class="data row5 col2" >5</td>
    </tr>
    <tr>
      <th id="T_c310a_level0_row6" class="row_heading level0 row6" >6</th>
      <td id="T_c310a_row6_col0" class="data row6 col0" >0</td>
      <td id="T_c310a_row6_col1" class="data row6 col1" >0</td>
      <td id="T_c310a_row6_col2" class="data row6 col2" >1</td>
    </tr>
  </tbody>
</table>





```python
f, ax = plt.subplots(1, 2, figsize = (20, 8))
sns.barplot(x = 'Parch', y = 'Survived', data = data, ax = ax[0])
ax[0].set_title('Parch vs Survived')
sns.pointplot(x = 'Parch', y = 'Survived', data = data, ax = ax[1])
ax[1].set_title('Parch vs Survived')
plt.close(2)
plt.show()
```


    
![2023-07-03-EDA_59_0](https://github.com/SukyungJang/kaggle/assets/133842344/61df55f4-e2ce-4083-bdef-bb0e8a668a3c)
    


관찰 결과: <br/>

여기에서도 결과는 매우 유사합니다. 부모화 함께 탑승한 승객은 생존할 가능성이 더 높습니다. 그러나 부모 수가 증가함에 따라 생존 가능성이 감소합니다. <br/>

1-3명의 부모를 가진 사람들은 생존 가능성이 높습니다. 혼자인 경우에도 생존 가능성이 감소하며, 4명 이상의 부모를 가진 사람들은 생존 가능성이 더욱 낮아집니다.

**Fare -> Continous Feature**


```python
print('Highest Fare was:', data['Fare'].max())
print('Lowest Fare was:', data['Fare'].min())
print('Average Fare was:', data['Fare'].mean())
```

    Highest Fare was: 512.3292
    Lowest Fare was: 0.0
    Average Fare was: 32.204207968574636
    


```python
f, ax = plt.subplots(1, 3, figsize = (20, 8))
sns.distplot(data[data['Pclass'] == 1].Fare, ax = ax[0])
ax[0].set_title('Fares in Pclass 1')
sns.distplot(data[data['Pclass'] == 2].Fare, ax = ax[1])
ax[1].set_title('Fares in Pclass 2')
sns.distplot(data[data['Pclass'] == 3].Fare, ax = ax[2])
ax[2].set_title('Fares in Pclass 3')
plt.show()
```


    
![2023-07-03-EDA_63_0](https://github.com/SukyungJang/kaggle/assets/133842344/77b6ba38-755d-41ab-b579-e7199a1f3caa)
    


Pclass 1의 승객들의 요금은 분포가 크고, 이 분포는 등급이 낮아짐에 따라 감소합니다. 이것은 연속형 변수이므로 구간화를 통해 이산값으로 변환할 수 있습니다.

모든 특징에 대한 간략한 관찰 결과: <br/>
Sex: 여성의 생존 가능성이 남성보다 높습니다. <br/>

Pclass: 1등급 승객인 경우 생존 가능성이 높아집니다. Pclass3의 생존율은 매우 낮습니다. 여성의 경우 Pclass1에서의 생존 가능성은 거의 1이며, Pclass2에서도 높습니다. <br/>

Age: 5-10세 미만의 어린이들은 생존 가능성이 높습니다. 15세에서 35세 사이의 승객들은 많이 사망했습니다. <br/>

Embarked: C에서의 생존 가능성이 더 좋아 보입니다. 비록 대부분의 Pclass 1 승객들이 S에서 탑승했습니다. Q에서의 승객은 모두 Pclass 3 승객입니다. <br/>

Parch + SibSp: 형제자매, 배우자가 1-2명이 있는 경우 또는 부모가 1-3명인 경우 생존 가능성이 높아집니다. 혼자인 경우나 큰 가족과 함께 여행하는 경우보다 생존 가능성이 높습니다.

**Correlation Between The Features**


```python
sns.heatmap(data.corr(), annot = True, cmap = 'RdYlGn', linewidths = 0.2) # data.corr() --> correlation matrix
fig = plt.gcf()
fig.set_size_inches(10, 8)
plt.show()
```


    
![2023-07-03-EDA_67_0](https://github.com/SukyungJang/kaggle/assets/133842344/56de6c22-8d7b-46d0-a5bb-7fdc94da6777)
    


히트맵 해석하기 <br/>

먼저 알파벳이나 문자열 간에는 상관관계를 구할 수 없으므로, 히트맵에서는 숫자형 특성만 비교됩니다. 플롯을 이해하기 전에 상관관계가 정확히 무엇인지 알아봅시다. <br/>

양의 상관관계: 특성 A의 증가가 특성 B의 증가로 이어진다면, 두 특성은 양의 상관관계를 가지고 있습니다. 값 1은 완벽한 양의 상관관계를 의미합니다. <br/>

음의 상관관계: 특성 A의 증가가 특성 B의 감소로 이어진다면, 두 특성은 음의 상관관계를 가지고 있습니다. 값 -1은 완벽한 음의 상관관계를 의미합니다. <br/>

이제 두 특성이 높거나 완벽하게 상관관계가 있는 경우를 생각해봅시다. 하나의 특성이 증가하면 다른 특성도 증가한다는 것을 의미합니다. 이는 두 특성이 거의 동일한 정보를 포함하고 있으며 정보의 변동의 거의 없다는 것을 의미합니다. 이를 다중공선성이라고 하며, 두 특성 모두 거의 동일한 정보를 포함하고 있기 때문에 하나는 중복되는 특성입니다. <br/>

따라서 모델 생성 또는 학습할 때 중복된 특성을 제거하는 것이 좋습니다. 중복된 특성을 제거하면 학습 시간이 단축되고 다른 여러 이점이 있습니다. <br/>

위의 히트맵에서는 특성들이 서로 크게 상관관계가 없는 것을 볼 수 있습니다. 가장 높은 상관관계는 SibSp와 Parch 사이의 상관관계인 0.41입니다. 따라서 모든 특성을 사용할 수 있습니다.

# 3. 출처
1. <https://kaggle-kr.tistory.com/32>
2. <https://www.kaggle.com/code/ash316/eda-to-prediction-dietanic/notebook>
<br/>
위의 사이트에서 제공하는 코드는 오래된 코드여서 안되는 것들이 있습니다. 저는 똑같이 나오되 코드는 다르게 작성했습니다.
